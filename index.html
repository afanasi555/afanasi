<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Emoji Match Game</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            text-align: center;
            margin: 0;
            padding: 0;
        }
        h1 {
            margin-top: 20px;
            color: #333;
        }
        .game-container {
            margin: 20px auto;
            display: grid;
            grid-template-columns: repeat(8, 50px);
            grid-template-rows: repeat(8, 50px);
            gap: 5px;
            width: fit-content;
        }
        .cell {
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            background-color: white;
            border-radius: 5px;
            cursor: pointer;
            transition: transform 0.2s;
        }
        .cell:hover {
            transform: scale(1.1);
        }
        .buttons {
            margin: 20px;
        }
        button {
            padding: 10px 20px;
            margin: 5px;
            font-size: 16px;
            cursor: pointer;
        }
        .bomb {
            color: red;
        }
    </style>
</head>
<body>

    <h1>Emoji Match Game</h1>

    <div class="buttons">
        <button onclick="startGame()">Start Game</button>
        <button onclick="pauseGame()">Pause</button>
        <button onclick="undoMove()">Undo</button>
    </div>

    <div class="game-container" id="game-container">
        <!-- –ò–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ –±—É–¥–µ—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –∑–¥–µ—Å—å -->
    </div>

    <script>
        const emojis = ["‚≠ê", "‚ú®", "üí¶", "üî•", "üéâ", "‚ù§Ô∏è", "üß°", "üíõ", "üíö", "üíô", "üíú", "üçì", "üçí", "üçé"];
        let gameBoard = [];
        let selectedCells = [];
        let moves = [];

        function generateGameBoard() {
            const container = document.getElementById("game-container");
            container.innerHTML = '';
            gameBoard = [];

            for (let i = 0; i < 64; i++) { // 8x8 –ø–æ–ª–µ
                const cell = document.createElement('div');
                cell.classList.add('cell');
                const emoji = emojis[Math.floor(Math.random() * emojis.length)];
                cell.innerText = emoji;
                cell.dataset.index = i;
                cell.addEventListener('click', () => selectCell(i));
                container.appendChild(cell);
                gameBoard.push(emoji);
            }
        }

        function startGame() {
            generateGameBoard();
        }

        function pauseGame() {
            alert("Game paused.");
        }

        function undoMove() {
            if (moves.length > 0) {
                const lastMove = moves.pop();
                swapCells(lastMove.index1, lastMove.index2);
            }
        }

        function selectCell(index) {
            if (selectedCells.length === 0) {
                selectedCells.push(index);
            } else if (selectedCells.length === 1) {
                const validMove = isValidMove(selectedCells[0], index);
                if (validMove) {
                    swapCells(selectedCells[0], index);
                    selectedCells = [];
                    checkMatches();
                } else {
                    selectedCells = [index];
                }
            }
        }

        function swapCells(index1, index2) {
            const temp = gameBoard[index1];
            gameBoard[index1] = gameBoard[index2];
            gameBoard[index2] = temp;

            moves.push({ index1, index2 });

            renderBoard();
        }

        function renderBoard() {
            const container = document.getElementById("game-container");
            container.childNodes.forEach((cell, index) => {
                cell.innerText = gameBoard[index];
            });
        }

        function checkMatches() {
            const matches = findMatches();
            if (matches.length > 0) {
                removeMatches(matches);
                refillBoard();
                renderBoard();
            }
        }

        function findMatches() {
            const matches = [];

            // –ù–∞–π—Ç–∏ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è
            for (let i = 0; i < 64; i += 8) {
                for (let j = 0; j < 6; j++) {
                    const start = i + j;
                    if (gameBoard[start] === gameBoard[start + 1] && gameBoard[start + 1] === gameBoard[start + 2]) {
                        matches.push(start, start + 1, start + 2);
                    }
                }
            }

            // –ù–∞–π—Ç–∏ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è
            for (let i = 0; i < 8; i++) {
                for (let j = 0; j < 6; j++) {
                    const start = i + j * 8;
                    if (gameBoard[start] === gameBoard[start + 8] && gameBoard[start + 8] === gameBoard[start + 16]) {
                        matches.push(start, start + 8, start + 16);
                    }
                }
            }

            return [...new Set(matches)];
        }

        function removeMatches(matches) {
            matches.forEach(index => {
                gameBoard[index] = null; // –£–±–∏—Ä–∞–µ–º —Å–æ–≤–ø–∞–≤—à–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã
            });
        }

        function refillBoard() {
            for (let i = 0; i < 64; i++) {
                if (gameBoard[i] === null) {
                    gameBoard[i] = emojis[Math.floor(Math.random() * emojis.length)];
                }
            }
        }

        function isValidMove(index1, index2) {
            const adjacent = Math.abs(index1 - index2) === 1 || Math.abs(index1 - index2) === 8;
            return adjacent && (gameBoard[index1] === gameBoard[index2] || checkPotentialMatch(index1, index2));
        }

        function checkPotentialMatch(index1, index2) {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ–∑–¥–∞–Ω–∏—è —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π –ø—Ä–∏ –æ–±–º–µ–Ω–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
            swapCells(index1, index2);
            const matches = findMatches();
            swapCells(index1, index2);
            return matches.length > 0;
        }

        startGame();
    </script>

</body>
</html>
