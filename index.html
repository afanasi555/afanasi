<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ğ¢Ñ€Ğ¸ Ğ² Ñ€ÑĞ´ - ĞœĞ½Ğ¾Ğ³Ğ¾ÑƒÑ€Ğ¾Ğ²Ğ½ĞµĞ²Ğ°Ñ Ğ¸Ğ³Ñ€Ğ°</title>
    <style>
        /* ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ ÑÑ‚Ğ¸Ğ»Ğ¸ */
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .menu, .level-board, .game-board, .shop {
            margin-top: 20px;
            display: none;
        }
        .menu {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .menu h1, .game-board h1 {
            font-size: 32px;
        }
        .levels {
            display: grid;
            grid-template-columns: repeat(5, 50px);
            gap: 10px;
            margin-top: 20px;
        }
        .level {
            width: 50px;
            height: 50px;
            background-color: #fff;
            border: 1px solid #ccc;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 18px;
            cursor: pointer;
        }
        .locked {
            background-color: #ccc;
            cursor: not-allowed;
        }
        .shop-button {
            margin-top: 20px;
            padding: 10px 20px;
            font-size: 18px;
            background-color: #008CBA;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .game-board {
            display: grid;
            grid-template-columns: repeat(8, 50px);
            gap: 5px;
            margin-top: 20px;
        }
        .cell {
            width: 50px;
            height: 50px;
            background-color: #fff;
            border: 1px solid #ddd;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
        }
        .status {
            margin-top: 10px;
            font-size: 18px;
        }
        .shop, .shop-button {
            display: block;
        }
        .shop {
            background-color: #fff;
            padding: 20px;
            border: 1px solid #ccc;
            text-align: center;
        }
        .shop button {
            margin: 5px;
            padding: 10px 20px;
            cursor: pointer;
        }
    </style>
</head>
<body>

    <div class="menu">
        <h1>Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ ÑƒÑ€Ğ¾Ğ²ĞµĞ½ÑŒ</h1>
        <div class="levels" id="levels">
            <!-- Ğ£Ñ€Ğ¾Ğ²Ğ½Ğ¸ Ğ±ÑƒĞ´ÑƒÑ‚ Ğ³ĞµĞ½ĞµÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒÑÑ Ğ´Ğ¸Ğ½Ğ°Ğ¼Ğ¸Ñ‡ĞµÑĞºĞ¸ -->
        </div>
        <button class="shop-button" onclick="openShop()">ğŸ›ï¸ ĞœĞ°Ğ³Ğ°Ğ·Ğ¸Ğ½</button>
    </div>

    <div class="game-board" id="game-board">
        <h1>Ğ˜Ğ³Ñ€Ğ°</h1>
        <div class="status">
            <p>ĞÑÑ‚Ğ°Ğ»Ğ¾ÑÑŒ Ñ…Ğ¾Ğ´Ğ¾Ğ²: <span id="moves-left"></span></p>
            <p>Ğ—Ğ°Ğ´Ğ°Ğ½Ğ¸Ğµ: Ğ¡Ğ¾Ğ±Ñ€Ğ°Ñ‚ÑŒ <span id="task-item"></span> x <span id="task-count"></span></p>
        </div>
        <div id="board" class="game-board">
            <!-- Ğ˜Ğ³Ñ€Ğ¾Ğ²Ğ¾Ğµ Ğ¿Ğ¾Ğ»Ğµ Ğ±ÑƒĞ´ĞµÑ‚ Ğ³ĞµĞ½ĞµÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒÑÑ Ğ´Ğ¸Ğ½Ğ°Ğ¼Ğ¸Ñ‡ĞµÑĞºĞ¸ -->
        </div>
        <button class="shop-button" onclick="retryLevel()">ğŸ”ƒ ĞŸÑ€Ğ¾Ğ¹Ñ‚Ğ¸ Ğ·Ğ°Ğ½Ğ¾Ğ²Ğ¾</button>
    </div>

    <div class="shop" id="shop">
        <h2>ğŸ›ï¸ ĞœĞ°Ğ³Ğ°Ğ·Ğ¸Ğ½</h2>
        <p>Ğ’Ğ°ÑˆĞ¸ Ğ¼Ğ¾Ğ½ĞµÑ‚Ñ‹: <span id="coins">0</span> ğŸŒ•</p>
        <button onclick="buyItem('bomb')">ĞšÑƒĞ¿Ğ¸Ñ‚ÑŒ Ğ‘Ğ¾Ğ¼Ğ±Ñƒ ğŸ’£ - 40 Ğ¼Ğ¾Ğ½ĞµÑ‚</button>
        <button onclick="buyItem('move')">ĞšÑƒĞ¿Ğ¸Ñ‚ÑŒ Ñ…Ğ¾Ğ´ â• - 1 Ğ¼Ğ¾Ğ½ĞµÑ‚Ğ°</button>
        <button onclick="closeShop()">Ğ—Ğ°ĞºÑ€Ñ‹Ñ‚ÑŒ Ğ¼Ğ°Ğ³Ğ°Ğ·Ğ¸Ğ½</button>
    </div>

    <script>
        // Ğ¡Ğ¼Ğ°Ğ¹Ğ»Ğ¸ĞºĞ¸ Ğ´Ğ»Ñ Ğ¸Ğ³Ñ€Ğ¾Ğ²Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾Ğ»Ñ
        const objects = [
            'â­', 'âœ¨', 'ğŸ’¦', 'ğŸ”¥', 'ğŸ‰', 'â¤ï¸', 'ğŸ§¡', 'ğŸ’›', 'ğŸ’š', 'ğŸ©µ', 'ğŸ’™', 
            'ğŸ’œ', 'ğŸ¤', 'ğŸ–¤', 'ğŸ©¶', 'ğŸ’…', 'ğŸŒ¹', 'ğŸŒ¸', 'ğŸŒ±', 'ğŸŒ³', 'ğŸ€', 'ğŸŒ²', 
            'â›„', 'â˜ƒï¸', 'ğŸŒ', 'ğŸŒš', 'ğŸŒ•', 'ğŸ±', 'ğŸ¯', 'ğŸ¦', 'ğŸ¦„', 'ğŸ¸', 'ğŸ˜', 
            'ğŸ£', 'ğŸŸ', 'ğŸ ', 'ğŸ¡', 'ğŸª¼', 'ğŸ', 'ğŸ', 'ğŸ“', 'ğŸ’', 'ğŸ', 'ğŸ‰', 
            'ğŸŒ', 'ğŸ', 'ğŸ‡', 'ğŸ”', 'ğŸ¥¨', 'ğŸŸ', 'ğŸ•', 'ğŸ¥—', 'ğŸ­', 'ğŸ¬', 'ğŸ«', 
            'ğŸª', 'ğŸ¯', 'ğŸ¥¤', 'ğŸ€', 'ğŸ', 'ğŸˆ', 'ğŸŠ', 'ğŸ‰', 'ğŸ§¨', 'âš½', 'ğŸ€', 
            'ğŸ§¶', 'ğŸ“€', 'ğŸ’¿', 'ğŸ’¸', 'ğŸ‘ ', 'âšœï¸', 'ğŸ”±', 'â˜¢ï¸', 'â˜£ï¸', 'ğŸ’£'  // Ğ‘Ğ¾Ğ¼Ğ±Ğ° ğŸ’£
        ];

        let levels = [];
        let coins = 0;
        let currentLevelIndex = 0;
        let movesLeft = 0;
        let taskCount = 0;
        let board = [];

        function generateLevels() {
            for (let i = 1; i <= 10; i++) {
                const randomItem = objects[Math.floor(Math.random() * objects.length)];
                const randomCount = Math.floor(Math.random() * 6) + 3;  // Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ° Ğ½Ğ° ÑĞ±Ğ¾Ñ€ Ğ¾Ñ‚ 3 Ğ´Ğ¾ 8 Ğ¿Ñ€ĞµĞ´Ğ¼ĞµÑ‚Ğ¾Ğ²
                const maxMoves = randomCount * 2 + 5;  // ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ñ…Ğ¾Ğ´Ğ¾Ğ² Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ñ‚ Ğ¾Ñ‚ ÑĞ»Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸
                levels.push({
                    level: i,
                    task: { item: randomItem, count: randomCount },
                    maxMoves: maxMoves,
                    completed: false,
                    stars: 0
                });
            }
        }

        function initializeMenu() {
            const levelsElement = document.getElementById('levels');
            levelsElement.innerHTML = '';
            levels.forEach((level, index) => {
                const levelElement = document.createElement('div');
                levelElement.className = 'level';
                if (level.completed || index === 0 || levels[index - 1].completed) {
                    levelElement.textContent = `${level.level} ğŸŒŸ${level.stars}`;
                    levelElement.addEventListener('click', () => startLevel(index));
                } else {
                    levelElement.textContent = `${level.level}`;
                    levelElement.className += ' locked';
                }
                levelsElement.appendChild(levelElement);
            });
        }

        function startLevel(index) {
            currentLevelIndex = index;
            movesLeft = levels[index].maxMoves;
            taskCount = levels[index].task.count;
            document.getElementById('moves-left').textContent = movesLeft;
            document.getElementById('task-item').textContent = levels[index].task.item;
            document.getElementById('task-count').textContent = taskCount;

            board = generateBoard(8);
            renderBoard();

            document.querySelector('.menu').style.display = 'none';
            document.querySelector('.game-board').style.display = 'block';
        }

        function generateBoard(size) {
            const board = [];

            for (let i = 0; i < size; i++) {
                const row = [];

                for (let j = 0; j < size; j++) {
                    let newItem = objects[Math.floor(Math.random() * objects.length)];

                    // ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ°, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ½Ğµ Ğ±Ñ‹Ğ»Ğ¾ ÑĞ¾Ğ²Ğ¿Ğ°Ğ´ĞµĞ½Ğ¸Ğ¹ ÑÑ€Ğ°Ğ·Ñƒ Ğ¿Ñ€Ğ¸ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸
                    if (j >= 2 && row[j - 1] === row[j - 2] && row[j - 1] === newItem) {
                        // Ğ•ÑĞ»Ğ¸ Ğ¿Ñ€ĞµĞ´Ñ‹Ğ´ÑƒÑ‰Ğ¸Ğµ Ğ´Ğ²Ğ° ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚Ğ° Ğ¾Ğ´Ğ¸Ğ½Ğ°ĞºĞ¾Ğ²Ñ‹, Ğ²Ñ‹Ğ±Ğ¸Ñ€Ğ°ĞµĞ¼ Ğ´Ñ€ÑƒĞ³Ğ¾Ğ¹ ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚
                        newItem = objects.filter(item => item !== row[j - 1])[Math.floor(Math.random() * (objects.length - 1))];
                    } else if (i >= 2 && board[i - 1][j] === board[i - 2][j] && board[i - 1][j] === newItem) {
                        // Ğ•ÑĞ»Ğ¸ Ğ´Ğ²Ğ° ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚Ğ° Ğ¿Ğ¾ Ğ²ĞµÑ€Ñ‚Ğ¸ĞºĞ°Ğ»Ğ¸ Ğ¾Ğ´Ğ¸Ğ½Ğ°ĞºĞ¾Ğ²Ñ‹, Ğ²Ñ‹Ğ±Ğ¸Ñ€Ğ°ĞµĞ¼ Ğ´Ñ€ÑƒĞ³Ğ¾Ğ¹ ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚
                        newItem = objects.filter(item => item !== board[i - 1][j])[Math.floor(Math.length - 1))];
                    }

                    row.push(newItem);
                }

                board.push(row);
            }

            // Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµĞ¼ ĞºĞ¾Ğ¼Ğ±Ğ¸Ğ½Ğ°Ñ†Ğ¸Ğ¸ 2 Ğ¸Ğ»Ğ¸ 3 Ğ¾Ğ±ÑŠĞµĞºÑ‚Ğ¾Ğ² Ñ€ÑĞ´Ğ¾Ğ¼
            for (let i = 0; i < size; i++) {
                for (let j = 0; j < size - 2; j++) {
                    if (Math.random() < 0.3) {  // 30% ÑˆĞ°Ğ½Ñ Ğ½Ğ° ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ ĞºĞ¾Ğ¼Ğ±Ğ¸Ğ½Ğ°Ñ†Ğ¸Ğ¸
                        let patternType = Math.random();
                        
                        if (patternType < 0.5) {  // 50% ÑˆĞ°Ğ½Ñ Ğ½Ğ° Ğ¿Ğ°Ñ€Ñƒ Ğ¾Ğ±ÑŠĞµĞºÑ‚Ğ¾Ğ²
                            board[i][j] = board[i][j + 1] = objects[Math.floor(Math.random() * objects.length)];
                        } else {  // 50% ÑˆĞ°Ğ½Ñ Ğ½Ğ° 3 Ğ¾Ğ±ÑŠĞµĞºÑ‚Ğ°, Ñ Ğ¾Ğ´Ğ½Ğ¸Ğ¼ Ğ¾Ğ±ÑŠĞµĞºÑ‚Ğ¾Ğ¼ Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ½Ğ¸Ğ¼Ğ¸
                            board[i][j] = board[i][j + 2] = objects[Math.floor(Math.random() * objects.length)];
                        }
                    }
                }
            }

            return board;
        }

        function renderBoard() {
            const boardElement = document.getElementById('board');
            boardElement.innerHTML = '';

            board.forEach(row => {
                row.forEach(cell => {
                    const cellElement = document.createElement('div');
                    cellElement.className = 'cell';
                    cellElement.textContent = cell;
                    cellElement.onclick = () => handleCellClick(cell);
                    boardElement.appendChild(cellElement);
                });
            });
        }

        function handleCellClick(cell) {
            // Ğ›Ğ¾Ğ³Ğ¸ĞºĞ° Ğ´Ğ»Ñ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ Ğ½Ğ°Ğ¶Ğ°Ñ‚Ğ¸Ñ Ğ½Ğ° ÑÑ‡ĞµĞ¹ĞºÑƒ
            // Ğ­Ñ‚Ğ° Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ñ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ±Ñ‹Ñ‚ÑŒ Ñ€Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ° Ğ´Ğ»Ñ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ Ğ¿ĞµÑ€ĞµĞ¼ĞµÑ‰ĞµĞ½Ğ¸Ñ Ğ¸ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ¸ ÑĞ¾Ğ²Ğ¿Ğ°Ğ´ĞµĞ½Ğ¸Ğ¹
            console.log('Cell clicked:', cell);
        }

        function retryLevel() {
            startLevel(currentLevelIndex);
        }

        function openShop() {
            document.querySelector('.menu').style.display = 'none';
            document.querySelector('.game-board').style.display = 'none';
            document.querySelector('.shop').style.display = 'block';
        }

        function closeShop() {
            document.querySelector('.shop').style.display = 'none';
            document.querySelector('.menu').style.display = 'block';
        }

        function buyItem(item) {
            if (item === 'bomb') {
                if (coins >= 40) {
                    coins -= 40;
                    document.getElementById('coins').textContent = coins;
                    // Ğ›Ğ¾Ğ³Ğ¸ĞºĞ° Ğ´Ğ»Ñ Ğ¿Ğ¾ĞºÑƒĞ¿ĞºĞ¸ Ğ±Ğ¾Ğ¼Ğ±Ñ‹
                    console.log('Bought bomb');
                } else {
                    alert('ĞĞµ Ñ…Ğ²Ğ°Ñ‚Ğ°ĞµÑ‚ Ğ¼Ğ¾Ğ½ĞµÑ‚!');
                }
            } else if (item === 'move') {
                if (coins >= 1) {
                    coins -= 1;
                    document.getElementById('coins').textContent = coins;
                    movesLeft += 1;
                    document.getElementById('moves-left').textContent = movesLeft;
                    // Ğ›Ğ¾Ğ³Ğ¸ĞºĞ° Ğ´Ğ»Ñ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ñ…Ğ¾Ğ´Ğ°
                    console.log('Bought move');
                } else {
                    alert('ĞĞµ Ñ…Ğ²Ğ°Ñ‚Ğ°ĞµÑ‚ Ğ¼Ğ¾Ğ½ĞµÑ‚!');
                }
            }
        }

        // Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¸Ğ³Ñ€Ñ‹ Ğ¸ Ğ¼ĞµĞ½Ñ
        generateLevels();
        initializeMenu();
    </script>

</body>
</html>
