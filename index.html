<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Emoji Match Game</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            text-align: center;
            margin: 0;
            padding: 0;
        }
        h1 {
            margin-top: 20px;
            color: #333;
        }
        .game-container {
            margin: 20px auto;
            display: grid;
            grid-template-columns: repeat(6, 50px);
            grid-template-rows: repeat(6, 50px);
            gap: 5px;
            width: fit-content;
        }
        .cell {
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            background-color: white;
            border-radius: 5px;
            cursor: pointer;
            transition: transform 0.2s;
        }
        .cell:hover {
            transform: scale(1.1);
        }
        .buttons {
            margin: 20px;
        }
        button {
            padding: 10px 20px;
            margin: 5px;
            font-size: 16px;
            cursor: pointer;
        }
        .level-button {
            padding: 10px;
            font-size: 16px;
            margin: 5px;
            width: 60px;
        }
        .disabled {
            opacity: 0.5;
            pointer-events: none;
        }
        .shop, .reset, .stars {
            font-size: 24px;
        }
        .hidden {
            visibility: hidden;
        }
    </style>
</head>
<body>

    <h1>Emoji Match Game</h1>

    <div class="buttons">
        <button onclick="startGame()">Start Game</button>
        <button onclick="pauseGame()">Pause</button>
        <button onclick="undoMove()">Undo</button>
    </div>

    <div class="game-container" id="game-container">
        <!-- Игровое поле будет генерироваться здесь -->
    </div>

    <div class="buttons">
        <button class="shop" onclick="openShop()">🛍️ Shop</button>
        <button class="reset" onclick="restartLevel()">🔃 Restart</button>
    </div>

    <h2>Level Select</h2>
    <div id="level-select">
        <!-- Кнопки уровней -->
        <button class="level-button" onclick="selectLevel(1)">Level 1</button>
        <button class="level-button disabled" onclick="selectLevel(2)">Level 2</button>
        <button class="level-button disabled" onclick="selectLevel(3)">Level 3</button>
        <!-- Добавить больше уровней по мере прохождения -->
    </div>

    <div class="status">
        <div>Stars: <span id="stars">🌟🌟🌟</span></div>
        <div>Coins: <span id="coins">🌕 0</span></div>
    </div>

    <script>
        const emojis = ["⭐", "✨", "💦", "🔥", "🎉", "❤️", "🧡", "💛", "💚", "🩵", "💙", "💜", "🤎", "🖤", "🩶", "💅", "🌹", "🌸", "🌱", "🌳", "🍀", "🌲", "⛄", "☃️", "🌝", "🌚", "🌕", "🐱", "🐯", "🦁", "🦄", "🐸", "🐘", "🐣", "🐟", "🐠", "🐡", "🪼", "🐞", "🐝", "🍓", "🍒", "🍎", "🍉", "🍌", "🍍", "🍇", "🍔", "🥨", "🍟", "🍕", "🥗", "🍭", "🍬", "🍫", "🍪", "🍯", "🥤", "🎀", "🎁", "🎈", "🎊", "🎉", "🧨", "⚽", "🏀", "🧶", "📀", "💿", "💸", "👠", "⚜️", "🔱", "☢️", "☣️"];
        let gameBoard = [];
        let selectedLevel = 1;
        let moves = [];
        let coins = 0;
        let stars = 3;
        let maxMoves = 15;
        let currentMoves = 0;
        let selectedCells = [];

        function generateGameBoard() {
            const container = document.getElementById("game-container");
            container.innerHTML = '';
            gameBoard = [];

            for (let i = 0; i < 36; i++) {
                const cell = document.createElement('div');
                cell.classList.add('cell');
                const emoji = emojis[Math.floor(Math.random() * emojis.length)];
                cell.innerText = emoji;
                cell.dataset.index = i;
                cell.addEventListener('click', () => selectCell(i));
                container.appendChild(cell);
                gameBoard.push(emoji);
            }
        }

        function startGame() {
            currentMoves = 0;
            generateGameBoard();
            updateStatus();
        }

        function pauseGame() {
            // Pause the game logic
            alert("Game paused.");
        }

        function undoMove() {
            if (moves.length > 0) {
                const lastMove = moves.pop();
                gameBoard[lastMove.index] = lastMove.emoji;
                renderBoard();
                currentMoves--;
                updateStatus();
            }
        }

        function selectLevel(level) {
            if (level > selectedLevel) return; // Нельзя перепрыгивать уровни
            selectedLevel = level;
            startGame();
        }

        function selectCell(index) {
            if (selectedCells.length === 0) {
                selectedCells.push(index);
            } else if (selectedCells.length === 1) {
                if (Math.abs(selectedCells[0] - index) === 1 || Math.abs(selectedCells[0] - index) === 6) {
                    swapCells(selectedCells[0], index);
                    selectedCells = [];
                }
            }
        }

        function swapCells(index1, index2) {
            const temp = gameBoard[index1];
            gameBoard[index1] = gameBoard[index2];
            gameBoard[index2] = temp;

            currentMoves++;
            moves.push({index: index1, emoji: temp});

            renderBoard();
            checkMatches();
            updateStatus();
        }

        function checkMatches() {
            // Логика проверки совпадений и удаления их с поля
            // Если совпадения есть - удаляем их, добавляем очки и монеты, заполняем поле новыми объектами
        }

        function bombAction(index) {
            // Логика действия бомбы
            const bombArea = getBombArea(index);
            bombArea.forEach(i => {
                gameBoard[i] = emojis[Math.floor(Math.random() * emojis.length)];
            });
            renderBoard();
        }

        function getBombArea(index) {
            // Получение области 4x4 вокруг бомбы
            let area = [];
            for (let i = -2; i <= 2; i++) {
                for (let j = -2; j <= 2; j++) {
                    const targetIndex = index + i + j * 6;
                    if (targetIndex >= 0 && targetIndex < 36) {
                        area.push(targetIndex);
                    }
                }
            }
            return area;
        }

        function renderBoard() {
            const container = document.getElementById("game-container");
            container.childNodes.forEach((cell, index) => {
                cell.innerText = gameBoard[index];
            });
        }

        function updateStatus() {
            document.getElementById("coins").innerText = `🌕 ${coins}`;
            document.getElementById("stars").innerText = stars >= 3 ? '🌟🌟🌟' : stars === 2 ? '🌟🌟' : '🌟';
        }

        function openShop() {
            alert("Welcome to the shop! You can buy bombs or extra moves.");
            // Логика покупки в магазине
        }

        function restartLevel() {
            startGame();
        }

        // Дополнительная логика для расчета ходов, уровней, и т.д.
    </script>

</body>
</html>
